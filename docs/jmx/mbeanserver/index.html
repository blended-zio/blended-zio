<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blended-zio/blog/rss.xml" title="Blended ZIO Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blended-zio/blog/atom.xml" title="Blended ZIO Blog Atom Feed"><title data-react-helmet="true">A simple MBean Server Facade | Blended ZIO</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="A simple MBean Server Facade | Blended ZIO"><meta data-react-helmet="true" name="description" content="This service is a small wrapper around the platform MBean server within a JVM. The use case is to"><meta data-react-helmet="true" property="og:description" content="This service is a small wrapper around the platform MBean server within a JVM. The use case is to"><meta data-react-helmet="true" property="og:url" content="https://blended-zio.github.io/blended-zio/blended-zio/docs/jmx/mbeanserver"><link data-react-helmet="true" rel="shortcut icon" href="/blended-zio/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blended-zio.github.io/blended-zio/blended-zio/docs/jmx/mbeanserver"><link rel="stylesheet" href="/blended-zio/styles.b0c1b4e5.css">
<link rel="preload" href="/blended-zio/styles.d9a0b84b.js" as="script">
<link rel="preload" href="/blended-zio/runtime~main.d68c9abc.js" as="script">
<link rel="preload" href="/blended-zio/main.7e8fceba.js" as="script">
<link rel="preload" href="/blended-zio/1.19696370.js" as="script">
<link rel="preload" href="/blended-zio/43.06c114df.js" as="script">
<link rel="preload" href="/blended-zio/44.e6cb2f23.js" as="script">
<link rel="preload" href="/blended-zio/935f2afb.5f2d17e5.js" as="script">
<link rel="preload" href="/blended-zio/42.26aa1c8b.js" as="script">
<link rel="preload" href="/blended-zio/d708cfb2.39ecce64.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/blended-zio/"><img src="/blended-zio/img/Logos/svg/black_no_background.svg" alt="Blended ZIO" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blended-zio/img/Logos/svg/black_no_background.svg" alt="Blended ZIO" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blended-zio/docs/">Docs</a><a class="navbar__item navbar__link" href="/blended-zio/blog">Blog</a><a href="https://github.com/blended-zio/blended-zio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blended-zio/"><img src="/blended-zio/img/Logos/svg/black_no_background.svg" alt="Blended ZIO" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/blended-zio/img/Logos/svg/black_no_background.svg" alt="Blended ZIO" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blended-zio/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blended-zio/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/blended-zio/blended-zio" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/blended-zio/docs/">Blended Use Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/blended-zio/docs/container">Service based containers</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Modules</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/blended-zio/docs/core/index">Blended ZIO Core</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">JMX</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/blended-zio/docs/jmx/index">Blended ZIO JMX</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/blended-zio/docs/jmx/mbeanserver">A simple MBean Server Facade</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/blended-zio/docs/jmx/mbeanpublisher">MBean Publisher</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/blended-zio/docs/jmx/servicemetrics">Service Metrics</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/blended-zio/docs/streams/index">Blended ZIO Streams</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">A simple MBean Server Facade</h1></header><div class="markdown"><p>This service is a small wrapper around the platform MBean server within a JVM. The use case is to
have a server side component which can query for the names within the MBeanServer for a given pattern
and to retrieve the MBean Information for a given object name. All JMX specific data shall be mapped
to appropriate classes, so that the data can be used later on with a simple read-only JMX REST service.</p><p>This leads to the following, simple interface definition:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">Service Definition</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">  trait Service {</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    /**</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * Retrieve the information for a MBean by it&#x27;s object name. Any JMX related information will be</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * passed to the error channel without modification. If successful, A [[JmxBeanInfo]] will be</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * returned.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     */</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    def mbeanInfo(objName: JmxObjectName): ZIO[Any, Throwable, JmxBeanInfo]</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    /**</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * Retrieve the list of all MBeanNames known to the underlying MBean Server.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * Any JMX exception that might occur will be passed onwards in the error</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * channel. If successful, a list of [[JmxObjectName]]s will be returned.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     */</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    def allMbeanNames(): ZIO[Any, Throwable, List[JmxObjectName]] = mbeanNames(None)</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    /**</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * Retrieve the list of all object names know to the underlying MBean Server.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * Any JMX exception that might occur will be passed onwards in the error</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * channel. If successful, a list of [[JmxObjectName]]s will be returned.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     * @param objName If non-empty, the result will contain all object names that</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     *                are in the same JMX domain and have all properties set within</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     *                the parameter as additional name properties.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     *                If empty, no filtering will be applied.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">     */</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    def mbeanNames(objName: Option[JmxObjectName]): ZIO[Any, Throwable, List[JmxObjectName]]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Even though the interface is defined without any environment restrictions, the actual <code>live</code> service requires that
a <code>Logging</code> service is available. We have decided to push the requirement for a <code>Logging</code> service into the instantiation
of the <code>live</code> service as we might come up with <code>test</code> instances at some point that should just mock up the interface and
does not require any logging at all.</p><p>We will use the <a href="https://zio.github.io/zio-logging/" target="_blank" rel="noopener noreferrer">zio-logging</a> API to perform the actual logging. See
<a href="/blended-zio/blog/zio-logging">this post</a> for more details on injecting different logging back-ends into the
<code>live</code> service instance.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="querying-for-mbean-names"></a>Querying for MBean Names<a class="hash-link" href="#querying-for-mbean-names" title="Direct link to heading">#</a></h2><p>To query for a set of MBean names with an optional is fairly straight forward wrapper around the original JMX API.
We just have to translate from the case class we want to use in our API to a JMX search pattern and call the API.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">  def mbeanNames(objName: Option[JmxObjectName]): ZIO[Logging, Throwable, List[JmxObjectName]] = for {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    pattern &lt;- optionalPattern(objName)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    _       &lt;- doLog(LogLevel.Info)(s&quot;Querying object names with [$pattern]&quot;)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    names   &lt;- queryNames(pattern)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    res      = names.map(JmxObjectName.fromObjectName)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  } yield res</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In order to make the code a bit more readable, we encapsulate the translation within some helper methods abstracting
over the case that the pattern may be optional. It might be that a single helper method to translate the pattern
would have been sufficient, but in this case it seemed to improve the code&#x27;s readability to have two helper methods.</p><p>The <code>queryNames</code> method performs the actual JMX call and translates the resulting Java object into a <code>List</code> of
<code>JmxObjectName</code></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">  // Helper method to query the MBean Server for existing MBean names. If a pattern is given this will be used</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  // as a search pattern, otherwise all names will be returned</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  private def queryNames(pattern: Option[ObjectName]): ZIO[Any, Throwable, List[ObjectName]] = ZIO.effect {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    val names: mutable.ListBuffer[ObjectName] = mutable.ListBuffer.empty[ObjectName]</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    svr.queryNames(pattern.orNull, null).forEach(n =&gt; names.append(n))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    names.toList</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  // Helper method create an optional pattern</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  private def optionalPattern(name: Option[JmxObjectName]): ZIO[Any, Throwable, Option[ObjectName]] = name match {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    case None    =&gt; ZIO.none</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    case Some(n) =&gt; toPattern(n).map(Some(_))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  }</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  // helper method to create a JMX search pattern from a given object name</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  private def toPattern(name: JmxObjectName): ZIO[Any, Throwable, ObjectName] =</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    ZIO.effect {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      val props = name.sortedProps</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      new ObjectName(s&quot;${name.domain}:${props.mkString(&quot;,&quot;)},*&quot;)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    }</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="retrieving-mbean-information"></a>Retrieving MBean information<a class="hash-link" href="#retrieving-mbean-information" title="Direct link to heading">#</a></h2><p>The complicated part retrieving MBean information is to translate the attributes within the MBean information to an actual
case class. We assume that the MBeans do have properties which are allowed for
<a href="https://docs.oracle.com/cd/E19206-01/816-4178/6madjde4v/index.html" target="_blank" rel="noopener noreferrer">OpenMBeans</a>.</p><p>If we encounter an attribute that is not valid as an attribute in the sense of the Open MBean specification, we will ignore
that attribute in our mapping rather than throw an exception. As a result, some attributes <em>may</em> be missing for certain
MBean Info objects.</p><p>The mapping between attributes and their case class representation happens within the <code>JmxAttributeCompanion</code> object. For the
simple types this is straight forward:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">          case _: Unit                  =&gt; ZIO.effectTotal(UnitAttributeValue())</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case s: String                =&gt; ZIO.effectTotal(StringAttributeValue(s))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case i: java.lang.Integer     =&gt; ZIO.effectTotal(IntAttributeValue(i))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case l: java.lang.Long        =&gt; ZIO.effectTotal(LongAttributeValue(l))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case b: java.lang.Boolean     =&gt; ZIO.effectTotal(BooleanAttributeValue(b))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case b: java.lang.Byte        =&gt; ZIO.effectTotal(ByteAttributeValue(b))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case s: java.lang.Short       =&gt; ZIO.effectTotal(ShortAttributeValue(s))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case f: java.lang.Float       =&gt; ZIO.effectTotal(FloatAttributeValue(f))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case d: java.lang.Double      =&gt; ZIO.effectTotal(DoubleAttributeValue(d))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case bi: java.math.BigInteger =&gt; ZIO.effectTotal(BigIntegerAtrributeValue(bi))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case bd: java.math.BigDecimal =&gt; ZIO.effectTotal(BigDecimalAtrributeValue(bd))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To map the complex data we will rely on the ZIO <code>collectPar</code> operator:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">          case t: TabularData =&gt;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            for {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">              values &lt;- ZIO.collectPar(t.values().asScala)(v =&gt; make(v).mapError(t =&gt; Option(t)))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            } yield TabularAttributeValue(values.toList)</span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">          case cd: CompositeData =&gt;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            for {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">              attrs &lt;- ZIO.collectPar(cd.getCompositeType().keySet().asScala.toList) { k =&gt;</span></div><div class="token-line" style="color:#403f53"><span class="token plain">                         ZIO.tupled(ZIO.succeed(k), make(cd.get(k))).mapError(t =&gt; Option(t))</span></div><div class="token-line" style="color:#403f53"><span class="token plain">                       }</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            } yield CompositeAttributeValue(attrs.toMap)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Note, that within <code>JmxAttributeCompanion</code> the overall signature is</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">def make(v: Any): ZIO[Any, IllegalArgumentException, AttributeValue[_]]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This means that the error handling is in the responsibility of the user of the <code>make</code> effect.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">  // Helper method to create a single JmxAttribute</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  private def mapAttribute(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    on: ObjectName,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    info: MBeanAttributeInfo</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  ): ZIO[Any, Nothing, Map[String, AttributeValue[_]]] = (for {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    attr &lt;- ZIO.fromTry(Try {</span></div><div class="token-line" style="color:#403f53"><span class="token plain">              svr.getAttribute(on, info.getName)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            })</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    av   &lt;- JmxAttributeCompanion.make(attr)</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  } yield (Map(info.getName -&gt; av))).orElse(ZIO.succeed(Map.empty[String, AttributeValue[_]]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Here, the <code>orElse</code> operator will handle the error by just ignoring the attribute that was faulty.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="representation-of-an-entire-mbean-info"></a>Representation of an entire MBean Info<a class="hash-link" href="#representation-of-an-entire-mbean-info" title="Direct link to heading">#</a></h3><p>The entire MBean Info object contains the <code>JmxObjectName</code> it belongs to and a Map of attribute names to their corresponding values.
In other words, the attributes of a MBean Info can be represented by an instance of <code>CompositeAttributeValue</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">final case class JmxBeanInfo(</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  objName: JmxObjectName,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  attributes: CompositeAttributeValue</span></div><div class="token-line" style="color:#403f53"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blended-zio/docs/jmx/index"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Blended ZIO JMX</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blended-zio/docs/jmx/mbeanpublisher"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MBean Publisher Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#querying-for-mbean-names" class="table-of-contents__link">Querying for MBean Names</a></li><li><a href="#retrieving-mbean-information" class="table-of-contents__link">Retrieving MBean information</a><ul><li><a href="#representation-of-an-entire-mbean-info" class="table-of-contents__link">Representation of an entire MBean Info</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blended-zio/docs/">Get Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/jaHWkWqn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://github.com/blended-zio/blended-zio/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blended-zio/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/blended-zio/blended-zio" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Way of Quality GmbH - Built with Docusaurus v2.</div></div></div></footer></div>
<script src="/blended-zio/styles.d9a0b84b.js"></script>
<script src="/blended-zio/runtime~main.d68c9abc.js"></script>
<script src="/blended-zio/main.7e8fceba.js"></script>
<script src="/blended-zio/1.19696370.js"></script>
<script src="/blended-zio/43.06c114df.js"></script>
<script src="/blended-zio/44.e6cb2f23.js"></script>
<script src="/blended-zio/935f2afb.5f2d17e5.js"></script>
<script src="/blended-zio/42.26aa1c8b.js"></script>
<script src="/blended-zio/d708cfb2.39ecce64.js"></script>
</body>
</html>